---
layout:         post
title:          Dev setup guide
date:           2020-04-26 22:00:00
image:          software-developer-icon-28.jpg
image-alt:      Software Developer working on desktop
tags:           [dev env, linux, tmux, zsh, nvim]
categories:     [guide]
---

Dev setup guide

<!-- more -->

1. TOC
{:toc}

## Sublime text [&#x1f517;](https://www.sublimetext.com/)
### Installation
```sh
wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -
sudo apt-get install apt-transport-https
echo "deb https://download.sublimetext.com/ apt/stable/" | sudo tee /etc/apt/sources.list.d/sublime-text.list
sudo apt-get update
sudo apt-get install sublime-text
```
### Plugins
- Text pastry
- TodoTxt Syntax
- All Autocomplete
- A File Icon
- SideBarEnhancements
- FileDiffs
- Markdown Preview
- MarkdownEditing
- VimL

## Settings
```json
{
	"ignored_packages":
	[
		"Markdown",
		"Vintage"
	],

	// The number of spaces a tab is considered equal to
	"tab_size": 2,

	// Set to true to insert spaces when tab is pressed
	"translate_tabs_to_spaces": false,

	// Columns in which to display vertical rulers
	"rulers": [120],

	// Disables horizontal scrolling if enabled.
	// May be set to true, false, or "auto", where it will be disabled for
	// source code, and otherwise enabled.
	"word_wrap": "auto",
}
```

## Key bindings
```json
[
	{ "keys": ["alt+up"], "command": "select_lines", "args": {"forward": false} },
	{ "keys": ["alt+down"], "command": "select_lines", "args": {"forward": true} },
	{ "keys": ["ctrl+:"], "command": "toggle_comment", "args": { "block": false } },
	{ "keys": ["ctrl+shift+:"], "command": "toggle_comment", "args": { "block": true } },
	{ "keys": ["ctrl+è"], "command": "show_panel", "args": {"panel": "console", "toggle": true} },
]
```

### Tip & tricks
### Get cursor scope
`ctrl + è` to enter the console and type `print (view.scope_name(view.sel()[0].b))`

## Oh my zsh [&#x1f517;](https://github.com/ohmyzsh/ohmyzsh)
### Installation
- Install curl
```sh
sudo apt install curl
```

- Install zsh
```sh
sudo apt install zsh
```

- Install git
```sh
sudo apt install git
```


- Install Oh my zsh
```sh
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
```

### Config
- Edit `~/.zshrc`
```sh
ZSH_THEME="agnoster"
plugins=(git zsh-autosuggestions zsh-syntax-highlighting)
# dir colors
eval `dircolors ~/.dir_colors/dircolors`
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
```
- Edit `~/.oh-my-zsh/themes/agnoster.zsh-theme` if needed
```sh
prompt_git() {
...
    # Truncate branch name if too long
    if [ ${#ref} -gt 43 ]; then
      ref="$(echo $ref | cut -c -40)..."
    fi
...
prompt_dir() {
# Freds, truncate dir if too long
  prompt_segment blue $CURRENT_FG '%(4~|.../%3~|%~)'
}
...
build_prompt() {
  RETVAL=$?
  prompt_status
  prompt_virtualenv
  prompt_dir
  prompt_git
  prompt_end
}
```

### Plugins
#### zsh-autosuggestions [&#x1f517;](https://github.com/zsh-users/zsh-autosuggestions/)
```sh
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
```

#### zsh-syntax-highlighting [&#x1f517;](https://github.com/zsh-users/zsh-syntax-highlighting)
```sh
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
```


## Terminal tools
### Firacode Nerd Font Regular [&#x1f517;](https://github.com/ryanoasis/nerd-fonts/tree/master/patched-fonts/FiraCode/Regular)
- Download [Fira Code Regular Nerd Font Complete](https://github.com/ryanoasis/nerd-fonts/blob/master/patched-fonts/FiraCode/Regular/complete/Fira%20Code%20Regular%20Nerd%20Font%20Complete.otf) (for nvim NerdTree compatibility purpose)
Double clic it to install it

- Setup terminal font (Firacode Nerd Font Regular - 13pt)

### Solarized & dircolors (Check [Make Linux terminal great again](https://maxim-danilov.github.io/make-linux-terminal-great-again/))
```sh
git clone git://github.com/sigurdga/gnome-terminal-colors-solarized.git ~/.solarized
cd ~/.solarized
/install.sh	# Chose option 1 twice
```
Open .zshrc and add the line
```sh
eval `dircolors ~/.dir_colors/dircolors`
```

### fzf [&#x1f517;](https://github.com/junegunn/fzf)
Install with [how-to-install-and-use-fzf](https://codeyarns.com/2017/10/24/how-to-install-and-use-fzf/)
```sh
git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf
~/.fzf/install
```

### rg [&#x1f517;](https://github.com/BurntSushi/ripgrep)
```sh
sudo apt-get install ripgrep
```

## Nvm [&#x1f517;](https://github.com/nvm-sh/nvm)

## Neovim [&#x1f517;](https://github.com/neovim/neovim)
### Installation
- Download `Download nvim.appimage` from [neovim releases page](https://github.com/neovim/neovim/releases/)
- Run
```sh
chmod u+x nvim.appimage
sudo ln -s nvim.appimage /usr/local/bin/nvim
```

### Install vim-plug (Plugins manager) [&#x1f517;](https://github.com/junegunn/vim-plug)
```sh
curl -fLo ~/.local/share/nvim/site/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
```

### Config file
```sh
" Plugins will be downloaded under the specified directory.
" call plug#begin('~/.vim/plugged')
call plug#begin(stdpath('data') . '/plugged')

" Declare the list of plugins.

" themes
Plug 'tomasr/molokai' "Molokai theme
Plug 'mhartington/oceanic-next'
Plug 'ryanoasis/vim-devicons' "Icons for filetypes
Plug 'vim-airline/vim-airline' "Status bar
Plug 'vim-airline/vim-airline-themes' "Applicable themes
"Plug 'junegunn/vim-emoji'

" code
Plug 'neoclide/coc.nvim', {'branch': 'release'}	"autocompletion
Plug 'tpope/vim-fugitive' "git tools
Plug 'jiangmiao/auto-pairs' "autocomplete brackets
Plug 'mitermayer/vim-prettier'
Plug 'scrooloose/nerdcommenter' "Comment toggle
"Plug 'dense-analysis/ale' "ES linter -- replaced with coc-tsserver

" Language Syntax Support
Plug 'pangloss/vim-javascript' "JS highlighting
"Plug 'mxw/vim-jsx' "JSX syntax highlighting
"Plug 'leafgarland/typescript-vim' "TS syntax highlighting

" tools
Plug 'junegunn/fzf', { 'dir': '~/.fzf', 'do': './install --all' }
Plug 'jremmen/vim-ripgrep'
Plug 'scrooloose/nerdtree', {'on': 'NERDTreeToggle'} "Nerdtree
Plug 'freitass/todo.txt-vim'
"Plug 'terryma/vim-multiple-cursors'

" List ends here. Plugins become visible to Vim after this call.
call plug#end()

filetype plugin indent on

let mapleader="\<space>"
let maplocalleader="\<space>"

" Theme settings 
syntax enable 
colors molokai

let g:airline_powerline_fonts = 1
let airline#extensions#coc#error_symbol = 'Error:'

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Core Functionality
 """""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" deal with swps and backups here
" create backups
set backup
" tell vim where to put its backup files
set backupdir=/tmp
" tell vim where to put swap files
set dir=/tmp

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" => NERDTree
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"Changes NerdTree Toggle to Ctrl + n
"map àn :NERDTreeToggle<CR>
map <C-n> :NERDTreeToggle<CR>
"autocmd VimEnter * NERDTree "Toggles Nerdtree on vim open

" Use NERDTree when opening a directory
autocmd StdinReadPre * let s:std_in=1
autocmd VimEnter * if argc() == 1 && isdirectory(argv()[0]) && !exists("s:std_in") | exe 'NERDTree' argv()[0] | wincmd p | ene | exe 'cd '.argv()[0] | endif

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" => ALE (ESlinter)
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"let g:ale_sign_error = '❌'
"let g:ale_sign_warning = '⚠️'
"let g:airline#extensions#ale#enabled = 1

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" => Conquer of Completion
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" jsonc (commented json) syntax highlighting
autocmd FileType json syntax match Comment +\/\/.\+$+

" use <tab> for trigger completion and navigate to the next complete item
function! s:check_back_space() abort
  let col = col('.') - 1
  return !col || getline('.')[col - 1]  =~ '\s'
endfunction

inoremap <silent><expr> <Tab>
      \ pumvisible() ? "\<C-n>" :
      \ <SID>check_back_space() ? "\<Tab>" :
      \ coc#refresh()

" use <tab> and <shift-tab> for navigating forward & backward within
" completion items
inoremap <expr> <Tab> pumvisible() ? "\<C-n>" : "\<Tab>"
inoremap <expr> <S-Tab> pumvisible() ? "\<C-p>" : "\<S-Tab>"

" use <cr> for validating the selected completion
inoremap <expr> <cr> pumvisible() ? "\<C-y>" : "\<C-g>u\<CR>"

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" => Text, tab and indent related
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" 1 tab == 2 spaces
set shiftwidth=2
set tabstop=2     " tab spacing

set ai            " Auto indent
" set si            " Smart indent
set wrap          " Wrap lines
set nowrap        " Don't wrap text

" Show line numbers
" turn absolute line numbers on
:set number
:set nu

:set colorcolumn=120

" Code fold bliss
" https://www.linux.com/learn/vim-tips-folding-fun
" set foldmethod=indent

" Blink cursor on error instead of beeping (grr)
set visualbell
set t_vb=

" set clipboard to easily copy from vim and paste into the os
set clipboard=unnamed

" adds blue highlight to vim in visual mode selections
highlight Visual cterm=bold ctermbg=Blue ctermfg=NONE
" Change cursor shape between insert and normal mode in iTerm2.app
if $TERM_PROGRAM =~ "iTerm"
    let &t_SI = "\<Esc>]50;CursorShape=1\x7" " Vertical bar in insert mode
    let &t_EI = "\<Esc>]50;CursorShape=0\x7" " Block in normal mode
endif

" Shows the title within the window
set title titlestring=

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" => Prettier
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Autosave
" disables autosave feature
let g:prettier#autoformat = 0

" print spaces between brackets
" Prettier default: true
let g:prettier#config#bracket_spacing = 'true'

" runs prettier on file formats
autocmd BufWritePre *.js,*.jsx,*.mjs,*.ts,*.tsx,*.css,*.less,*.scss,*.json,*.graphql,*.md,*.vue PrettierAsync

" NERDTress File highlighting
function! NERDTreeHighlightFile(extension, fg, bg, guifg, guibg)
 exec 'autocmd filetype nerdtree highlight ' . a:extension .' ctermbg='. a:bg .' ctermfg='. a:fg .' guibg='. a:guibg .' guifg='. a:guifg
 exec 'autocmd filetype nerdtree syn match ' . a:extension .' #^\s\+.*'. a:extension .'$#'
endfunction

call NERDTreeHighlightFile('jade', 'green', 'none', 'green', '#151515')
call NERDTreeHighlightFile('ini', 'yellow', 'none', 'yellow', '#151515')
call NERDTreeHighlightFile('md', 'blue', 'none', '#3366FF', '#151515')
call NERDTreeHighlightFile('yml', 'yellow', 'none', 'yellow', '#151515')
call NERDTreeHighlightFile('config', 'yellow', 'none', 'yellow', '#151515')
call NERDTreeHighlightFile('conf', 'yellow', 'none', 'yellow', '#151515')
call NERDTreeHighlightFile('json', 'yellow', 'none', 'yellow', '#151515')
call NERDTreeHighlightFile('html', 'yellow', 'none', 'yellow', '#151515')
call NERDTreeHighlightFile('styl', 'cyan', 'none', 'cyan', '#151515')
call NERDTreeHighlightFile('css', 'cyan', 'none', 'cyan', '#151515')
call NERDTreeHighlightFile('coffee', 'Red', 'none', 'red', '#151515')
call NERDTreeHighlightFile('js', 'Red', 'none', '#ffa500', '#151515')
call NERDTreeHighlightFile('ts', 'Red', 'none', '#ffa500', '#151515')
call NERDTreeHighlightFile('php', 'Magenta', 'none', '#ff00ff', '#151515')

" Custom mappings
map <C-j> <C-W>j
map <C-k> <C-W>k
map <C-h> <C-W>h
map <C-l> <C-W>l

```

- Launch nvim and type `:PlugInstall` to proceed to plugins installation

### Nvim-coc [&#x1f517;](https://github.com/neoclide/coc.nvim)
- Installed previously from Plug
- Install the following plugins:
   + coc-tsserver        : javascript/typescript server - completion, refactor etc
   + coc-tslint-plugin   : javascript/tyescript linting
   + coc-highlight       : provides basic highlight of words selected
   + coc-emmet           : emmet! works as in vscode
   + coc-marketplace     : marketplace to simplify search and installation of coc extensions
   + coc-html            : html - completion, refactor etc
   + coc-json            : json - completion, refactor etc
   + coc-vetur           : famous vscode plugin - completion,refactor,linting and much more for vuejs
   + coc-css             : css
   + coc-prettier 	 : formatting stuff
   + 

- Some refs:
> [Neovim config for frontend development](https://www.bha.ee/neovim-config-for-frontend-development/)
> [A guide to modern web development with neo-vim](https://www.freecodecamp.org/news/a-guide-to-modern-web-development-with-neo-vim-333f7efbf8e2/)
> [Vim for front-end development in 2019](https://benfrain.com/vim-again/)


## Tip & tricks
### Get cursor scope
`ctrl + è` to enter the console and type `print (view.scope_name(view.sel()[0].b))`

## Plugins
### Package control [&#x1f517;](https://packagecontrol.io/installation)
#### Installation
- Display console with ``ctrl + ` ``
- Copy / paste the following code into the console
```sh
import urllib.request,os,hashlib; h = '6f4c264a24d933ce70df5dedcf1dcaee' + 'ebe013ee18cced0ef93d5f746d80ef60'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by)
```

#### Usage
`ctrl + shift + p` and type `package control` to display the available options

### All Autocomplete [&#x1f517;](https://packagecontrol.io/packages/All20Autocomplete)

### A File Icon [&#x1f517;](https://packagecontrol.io/packages/A%20File%20Icon)

### SideBarEnhancements [&#x1f517;](https://packagecontrol.io/packages/SideBarEnhancements SideBarEnhancements)

### FileDiffs [&#x1f517;](https://packagecontrol.io/packages/FileDiffs)
#### Usage
Add a key binding for showing the diff menu
```sh
{ "keys": ["ctrl+shift+d"], "command": "file_diff_menu" },
```

### ColorPicker [&#x1f517;](https://packagecontrol.io/packages/ColorPicker)
#### Configuration
Set `color_upper_case` preference to `false`

#### Usage
Use `ctrl + shift + c` to insert or change a color.

### DocBlockr [&#x1f517;](https://packagecontrol.io/search/DocBlockr)
#### Usage 
Type `/**` and hit `tab` or `enter` to generate the comment  
Press `shit + enter` to generate an inline comment

### PlainTasks [&#x1f517;](https://packagecontrol.io/packages/PlainTasks)
#### Usage
Finish a line with `:` to create a category  
Create a new task with `enter + d`  
Terminate a task with `ctrl + d`  
Archive a task with `ctrl + shift + a`  
Priority :
```sh
    c + tab // @critical
    h + tab // @high
    l + tab // @low
    t + tab // @today
```
Due date :
```sh
    @due(+)   → tomorrow as well as @due( +1) or @due( +1d)
    @due(+w)  = @due( +7)
    @due(+3w) = @due( +21d)
    @due(++)  → count time since date of creation if task contains @created(date), otherwise it is equal to @due(+)
    @due(+2:)    = @due( +2.)    →  two hours since current date
    @due(+:555)  = @due( +.555)  →  555 minutes since current date
    @due(+2 12:) = @due( +2 12.) →  2 days and 12 hours since current date
```

### Markdown Preview [&#x1f517;](https://packagecontrol.io/packages/Markdown%20Preview)
#### Usage
`ctrl + shift + p` and type `Markdown Preview` to display the available options  
Add a key binding for quick preview within the browser
```sh
{ "keys": ["alt+m"], "command": "markdown_preview", "args": {"target": "browser", "parser":"markdown"} },
```

### MarkdownEditing [&#x1f517;](https://packagecontrol.io/packages/MarkdownEditing)

### Git [&#x1f517;](https://packagecontrol.io/packages/Git)
#### Usage
`ctrl + shift + p` and type `git` to display the available options

### GitGutter [&#x1f517;](https://packagecontrol.io/packages/GitGutter)

### GitStatusBar [&#x1f517;](https://packagecontrol.io/packages/GitStatusBar)
#### Setup
Remove status bar messages from Git and GitGutter

### jQuery [&#x1f517;](https://packagecontrol.io/packages/jQuery)

### Sass [&#x1f517;](https://packagecontrol.io/packages/Sass)

### Emmet [&#x1f517;](https://packagecontrol.io/packages/Emmet)
[Cheat sheet](https://docs.emmet.io/cheat-sheet/)

#### Add .js and .jsx files support
Check [Key Binding](https://docs.emmet.io/cheat-sheet/)[https://gist.github.com/wesbos/2bb4a6998635df97c748](https://gist.github.com/wesbos/2bb4a6998635df97c748)
Use `source.js` and `source.jsx` for full scope support

### Babel [&#x1f517;](https://packagecontrol.io/packages/Babel)
#### Usage
Open a file of the extension to associate with Babel.  
Click `View > Syntax > Open all with current extension as... > Babel > JavaScript (Babel)`

### ESLint-Formatter [&#x1f517;](https://packagecontrol.io/packages/ESLint-Formatter)

### SublimeLinter [&#x1f517;](https://packagecontrol.io/packages/SublimeLinter)
#### Installation & setup
Install `Sublime-contrib-eslint` via [Package Control](https://packagecontrol.io/packages/SublimeLinter-contrib-eslint)  
Install `SublimeLinter-contrib-standard` via [Package Control](https://packagecontrol.io/packages/SublimeLinter-contrib-standard)  
Edit SublimeLinter settings and modify the user settings. The file will be automatically filled.
Disable or enable the chosen linter  
Add the path to node binary (especially if using nvm)  

## User settings
```sh
{
	"color_scheme": "Packages/User/SublimeLinter/Monokai (SL).tmTheme",
	"font_size": 10,
	"ignored_packages":
	[
		"Markdown",
		"Vintage"
	],
	"theme": "Adaptive.sublime-theme",
  	"tab_size": 4,
	"translate_tabs_to_spaces": true,
	"always_show_minimap_viewport": true,
	"auto_find_in_selection": true,
	"caret_style": "phase",
	"highlight_modified_tabs": true,
	"trim_trailing_white_space_on_save": true,
	"rulers": [80],
	"auto_complete_cycle": true,
	"show_encoding": true,
	"remember_full_screen": true,
	"folder_exclude_patterns": ["node_modules", ".svn", ".git", ".hg", "CVS"],
}
```

## Key bindings
```sh
[
	{ "keys": ["super+alt+up"], "command": "select_lines", "args": {"forward": false} },
	{ "keys": ["super+alt+down"], "command": "select_lines", "args": {"forward": true} },
	{ "keys": ["ctrl+)"], "command": "indent" },
	{ "keys": ["ctrl+("], "command": "unindent" },
	{ "keys": ["alt+;"], "command": "close_tag" },
	{ "keys": ["ctrl+:"], "command": "toggle_comment", "args": { "block": false } },
	{ "keys": ["ctrl+shift+:"], "command": "toggle_comment", "args": { "block": true } },
	{ "keys": ["ctrl+è"], "command": "show_panel", "args": {"panel": "console", "toggle": true} },

	{ "keys": ["alt+:"], "command": "auto_complete" },
	{ "keys": ["alt+:"], "command": "replace_completion_with_auto_complete", "context":
		[
			{ "key": "last_command", "operator": "equal", "operand": "insert_best_completion" },
			{ "key": "auto_complete_visible", "operator": "equal", "operand": false },
			{ "key": "setting.tab_completion", "operator": "equal", "operand": true }
		]
	},
	{ "keys": ["ctrl+shift+("], "command": "fold" },
	{ "keys": ["ctrl+shift+)"], "command": "unfold" },	
	{ "keys": ["alt+m"], "command": "markdown_preview", "args": {"target": "browser", "parser":"markdown"} },
	{ "keys": ["ctrl+shift+d"], "command": "file_diff_menu" },
	{
	  "keys": ["tab"], 
	  "command": "expand_abbreviation_by_tab", 
	  // put comma-separated syntax selectors for which 
	  // you want to expandEmmet abbreviations into "operand" key 
	  // instead of SCOPE_SELECTOR.
	  // Examples: source.js, text.html - source
	  "context": [
	    {
	      "operand": "source.js, source.jsx, text.html", 
	      "operator": "equal", 
	      "match_all": true, 
	      "key": "selector"
	    }, 
	    // run only if there's no selected text
	    {
	      "match_all": true, 
	      "key": "selection_empty"
	    },
	    // don't work if there are active tabstops
	    {
	      "operator": "equal", 
	      "operand": false, 
	      "match_all": true, 
	      "key": "has_next_field"
	    }, 
	    // don't work if completion popup is visible and you
	    // want to insert completion with Tab. If you want to
	    // expand Emmet with Tab even if popup is visible -- 
	    // remove this section
	    {
	      "operand": false, 
	      "operator": "equal", 
	      "match_all": true, 
	      "key": "auto_complete_visible"
	    }, 
	    {
	      "match_all": true, 
	      "key": "is_abbreviation"
	    }
	  ]
	}
]
```

## Sources

> [Graphic logo from Free Icon Library](https://icon-library.net/icon/software-developer-icon-28.html)
